<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>La Flotta • STRATIA</title>

<!-- Preload immagini droni -->
<link rel="preload" as="image" href="https://upload.wikimedia.org/wikipedia/commons/f/fe/Drone_dji_mini_3_pro.jpg">
<link rel="preload" as="image" href="https://upload.wikimedia.org/wikipedia/commons/4/46/DJI_AVATA_2.jpg">
<link rel="preload" as="image" href="https://upload.wikimedia.org/wikipedia/commons/7/77/DJI_Air_2S_%281%29.jpg">
<link rel="preload" as="image" href="https://upload.wikimedia.org/wikipedia/commons/9/94/2024-10-_DJI_Mavic_3_Pro_-_09.jpg">

<style>
  :root{
    --bg:#ffffff;
    --card:#ffffff;
    --text:#0b2330;
    --muted:#64748b;
    --muted2:#94a3b8;
    --primary:#0e7490;
    --primary2:#0b5f76;
    --shadow:0 10px 50px rgba(2,8,23,.06);
    --shadow2:0 10px 26px rgba(2,8,23,.10);
    --radius:18px;
    --container:1200px;
    --dark: rgba(15,23,42,.72);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
  }
  a{color:inherit}
  .section{padding:18px 0}
  .container{max-width:var(--container); margin:0 auto; padding:0 20px; }

  /* ===== Header ===== */
  .site-header{
    background: linear-gradient(180deg, rgba(7,16,33,0.94), rgba(7,16,33,0.70));
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(234,243,255,0.10);
    position:sticky; top:0; z-index:100;
  }
  .header-inner{
    display:flex;
    align-items:center;
    gap:16px;
    padding:12px 0;
  }
  .brand{
    display:flex;
    align-items:center;
    gap:10px;
    text-decoration:none;
    color:#eaf3ff;
    min-width:180px;
  }
  .brand-logo{
    width:44px;
    height:44px;
    display:block;
    filter:
      drop-shadow(0 2px 6px rgba(0,0,0,0.55))
      drop-shadow(0 0 8px rgba(14,116,144,0.35));
  }
  .brand-name{
    font-weight:800;
    font-size:18px;
    opacity:.95;
  }
  .header-right{
    display:flex;
    align-items:center;
    gap:18px;
    margin-left:auto;
  }
  .header-cta{
    text-decoration:none;
    color:#fff;
    padding:10px 18px;
    border-radius:999px;
    font-weight:900;
    font-size:14px;
    border:1px solid rgba(255,255,255,.12);
    box-shadow:0 10px 26px rgba(0,0,0,.25);
    white-space:nowrap;
    transition: transform .18s ease, filter .18s ease;
    background: var(--dark);
  }
  .header-cta:hover{ transform: translateY(-1px); filter: brightness(1.05); }

  .fleet{
    background:
      radial-gradient(900px 520px at 12% -10%, rgba(14,116,144,.18), transparent 60%),
      radial-gradient(800px 520px at 90% 10%, rgba(14,116,144,.10), transparent 55%);
  }
  .fleet-head{
    display:flex;
    justify-content:space-between;
    align-items:flex-end;
    gap:20px;
    margin-bottom:20px;
  }
  .kicker{
    margin:0 0 8px;
    color:var(--primary);
    font-weight:900;
    letter-spacing:.12em;
    text-transform:uppercase;
    font-size:12px;
  }
  .fleet-title{margin:0 0 10px;font-size:38px;line-height:1.05;letter-spacing:-.02em}
  .fleet-sub{margin:0;color:var(--muted);max-width:64ch;line-height:1.55;font-size:15.5px}
  .pills{display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-end;}
  .pill{
    display:inline-flex;align-items:center;gap:8px;
    padding:10px 12px;border-radius:999px;
    background:rgba(255,255,255,.78);
    border:1px solid rgba(14,116,144,.18);
    box-shadow:0 10px 26px rgba(2,8,23,.05);
    font-weight:800;font-size:13px;color:rgba(11,35,48,.92);
    backdrop-filter: blur(8px);
    white-space:nowrap;
  }

  /* ===== Grid ===== */
  .fleet-grid{
    display:grid;
    grid-template-columns:repeat(2,minmax(0,1fr));
    gap:18px;
  }

  /* ===== Drone card ===== */
  .drone-card{
    background:var(--card);
    border:1px solid rgba(2,6,23,.08);
    border-radius:22px;
    box-shadow:var(--shadow2);
    overflow:hidden;
    transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease;
  }
  .drone-card:hover{
    transform: translateY(-6px);
    box-shadow: var(--shadow);
    border-color: rgba(14,116,144,.22);
  }

  .drone-top{
    padding:18px;
    background: linear-gradient(180deg, rgba(14,116,144,.10), rgba(255,255,255,0));
    border-bottom:1px solid rgba(2,6,23,.06);
    position:relative;
  }
  .drone-badges{
    position:absolute;top:16px;left:16px;
    display:flex;gap:8px;flex-wrap:wrap;
    z-index:3;
  }
  .badge{
    display:inline-flex;align-items:center;
    padding:8px 10px;border-radius:999px;
    font-size:12px;font-weight:900;letter-spacing:.02em;
    color:#eaf3ff;background: rgba(14,116,144,.92);
    border:1px solid rgba(255,255,255,.16);
    box-shadow:0 12px 26px rgba(2,8,23,.18);
    backdrop-filter: blur(8px);
  }
  .badge--soft{background: rgba(15,23,42,.70);}

  /* ===== Visual ===== */
  .drone-visual{
    height:160px;
    border-radius:16px;
    border:1px solid rgba(2,6,23,.10);
    box-shadow:0 14px 32px rgba(2,8,23,.10);
    overflow:hidden;
    margin-bottom:14px;
    position:relative;
    background:
      radial-gradient(700px 220px at 10% 0%, rgba(14,116,144,.25), transparent 55%),
      radial-gradient(500px 220px at 90% 20%, rgba(14,116,144,.12), transparent 60%),
      linear-gradient(135deg, rgba(15,23,42,.88), rgba(30,41,59,.60));
    --px: 0px;
    --py: 0px;
  }
  .drone-visual:before{
    content:"";
    position:absolute;inset:0;
    background:
      linear-gradient(90deg, rgba(255,255,255,.06) 1px, transparent 1px),
      linear-gradient(180deg, rgba(255,255,255,.06) 1px, transparent 1px);
    background-size:22px 22px;
    opacity:.28;
    mix-blend-mode: overlay;
    pointer-events:none;
    z-index:2;
  }
  .drone-visual:after{
    content:"";
    position:absolute;
    inset:-40% -60%;
    background: linear-gradient(115deg,
      transparent 0%,
      rgba(255,255,255,.10) 35%,
      rgba(255,255,255,.22) 45%,
      rgba(255,255,255,.10) 55%,
      transparent 100%);
    transform: translateX(-30%) rotate(8deg);
    opacity:0;
    transition: opacity .22s ease, transform .55s ease;
    pointer-events:none;
    z-index:4;
  }
  .drone-card:hover .drone-visual:after{
    opacity:.85;
    transform: translateX(30%) rotate(8deg);
  }
  .drone-visual img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
    transform: translate(var(--px), var(--py)) scale(1.06);
    transition: transform .18s ease;
    will-change: transform;
    position:relative;
    z-index:1;
    filter: saturate(1.02) contrast(1.02);
  }

  /* wireframe */
  .drone-card.wire .drone-visual img{
    filter: grayscale(1) contrast(1.25) brightness(.92);
    transform: translate(var(--px), var(--py)) scale(1.06);
  }
  .drone-card.wire .drone-visual:before{
    opacity:.55;
    background-size:18px 18px;
  }
  .drone-card.wire .drone-visual{
    outline: 1px solid rgba(14,116,144,.25);
    box-shadow: 0 14px 32px rgba(2,8,23,.12);
  }

  .wire-hint{
    position:absolute;right:16px;top:16px;
    z-index:5;
    display:inline-flex;align-items:center;gap:8px;
    padding:8px 10px;border-radius:999px;
    background: rgba(255,255,255,.78);
    border:1px solid rgba(2,6,23,.10);
    box-shadow:0 10px 22px rgba(2,8,23,.06);
    color: rgba(11,35,48,.86);
    font-weight:1000;font-size:12px;
    backdrop-filter: blur(8px);
    user-select:none;
  }
  .wire-dot{
    width:8px;height:8px;border-radius:999px;
    background: rgba(14,116,144,.85);
    box-shadow:0 0 0 3px rgba(14,116,144,.12);
  }

  .drone-name{margin:0;font-size:20px;letter-spacing:.01em}
  .drone-role{margin:6px 0 0;color:var(--muted);font-size:13.5px;line-height:1.4}

  .specs{
    padding:14px 18px 14px;
    display:grid;
    grid-template-columns:repeat(2,minmax(0,1fr));
    gap:10px;
  }
  .spec{
    border:1px solid rgba(2,6,23,.08);
    border-radius:14px;
    padding:10px 12px;
    background: linear-gradient(180deg, rgba(248,250,252,.92), rgba(255,255,255,.96));
  }
  .spec small{display:block;color:rgba(100,116,139,.95);font-weight:800;margin-bottom:3px;font-size:12px}
  .spec strong{display:block;font-weight:1000;color:rgba(11,35,48,.95);font-size:13.5px}

  .card-actions{
    padding:0 18px 18px;
    display:flex;
    justify-content:flex-end;
  }
  .toggle-btn{
    border:1px solid rgba(14,116,144,.25);
    background:rgba(14,116,144,.08);
    color:rgba(11,35,48,.92);
    font-weight:1000;
    padding:10px 14px;
    border-radius:12px;
    cursor:pointer;
    transition: transform .18s ease, background .18s ease, border-color .18s ease;
  }
  .toggle-btn:hover{transform:translateY(-2px);background:rgba(14,116,144,.12);border-color:rgba(14,116,144,.32);}

  /* ===== Drawer noleggio ===== */
  .drawer{
    border-top:1px solid rgba(2,6,23,.08);
    padding:16px 18px 18px;
    display:none;
    background:#fff;
  }
  .drawer.open{display:block}
  .drawer-head{
    display:flex;align-items:flex-end;justify-content:space-between;gap:12px;
    margin-bottom:10px;
  }
  .drawer-head h4{
    margin:0;
    font-size:13.5px;
    letter-spacing:.06em;
    text-transform:uppercase;
  }
  .drawer-head p{
    margin:0;
    color:var(--muted);
    font-size:12.5px;
  }

  .rent-grid{
    display:grid;
    grid-template-columns:repeat(2,minmax(0,1fr));
    gap:10px;
  }
  .rent-card{
    border:1px solid rgba(2,6,23,.08);
    border-radius:16px;
    padding:12px;
    box-shadow:0 10px 22px rgba(2,8,23,.06);
    background:#fff;
  }
  .rent-top{display:flex;align-items:baseline;justify-content:space-between;gap:10px;margin-bottom:8px}
  .rent-title{font-weight:1000}
  .rent-price{font-weight:1000;color:var(--primary)}
  .rent-list{margin:0;padding-left:16px;color:rgba(100,116,139,.95);font-size:12.5px;line-height:1.45}
  .rent-list li{margin:4px 0}
  .rent-cta{
    width:100%;
    margin-top:10px;
    border:none;
    background:rgba(14,116,144,.92);
    color:#eaf3ff;
    font-weight:1000;
    padding:11px 12px;
    border-radius:12px;
    cursor:pointer;
    transition: transform .18s ease, background .18s ease;
  }
  .rent-cta:hover{transform:translateY(-2px);background:rgba(11,95,118,.98);}

  .drawer-note{
    margin-top:12px;
    padding:10px 12px;
    border-radius:14px;
    background:rgba(14,116,144,.06);
    border:1px solid rgba(14,116,144,.14);
    color:rgba(11,35,48,.90);
    font-size:12.5px;
    line-height:1.45;
  }

  /* ===== Noleggio (sezione copy) ===== */
  .rental.section{padding-top:40px;}
  .rental-wrap{
    background:rgba(255,255,255,.72);
    border:1px solid rgba(2,6,23,.08);
    border-radius:22px;
    box-shadow:0 18px 50px rgba(2,8,23,.06);
    overflow:hidden;
  }
  .rental-head{padding:18px 18px 0;}
  .rental-head h3{margin:0 0 10px;font-size:22px;letter-spacing:-.01em;}
  .rental-head p{margin:0;color:var(--muted);line-height:1.6;max-width:78ch;}
  .rental-cols{padding:14px 18px 18px;}
  .rental-card{
    background:#fff;
    border:1px solid rgba(2,6,23,.08);
    border-radius:18px;
    padding:14px;
    box-shadow:0 10px 26px rgba(2,8,23,.06);
  }
  .rental-card h4{margin:0 0 10px;font-size:14px;letter-spacing:.06em;text-transform:uppercase;}
  .rental-list{margin:0;padding-left:16px;color:rgba(100,116,139,.95);line-height:1.55;}
  .rental-list li{margin:6px 0}

  /* ===== Form ===== */
  #contatti{scroll-margin-top: 90px;}
  .form-wrap{
    margin-top:18px;
    background:#fff;
    border:1px solid rgba(2,6,23,.08);
    border-radius:22px;
    box-shadow:0 18px 50px rgba(2,8,23,.06);
    overflow:hidden;
  }
  .form-head{padding:18px 18px 0}
  .form-head h3{margin:0 0 10px;font-size:22px}
  .form-head p{margin:0;color:var(--muted);line-height:1.6}
  form{padding:14px 18px 18px}
  .form-grid{
    display:grid;
    grid-template-columns:repeat(2,minmax(0,1fr));
    gap:12px;
  }
  label{
    display:block;
    font-size:12px;
    font-weight:900;
    color:rgba(11,35,48,.92);
    letter-spacing:.02em;
    text-transform:uppercase;
    margin-bottom:6px
  }
  input, textarea{
    width:100%;
    padding:12px 12px;
    border-radius:14px;
    border:1px solid rgba(2,6,23,.12);
    outline:none;
    font:inherit;
  }
  textarea{min-height:130px;resize:vertical;grid-column:1 / -1}
  .form-actions{
    display:flex;justify-content:flex-end;gap:10px;margin-top:12px
  }
  .btn{
    border-radius:12px;
    padding:11px 14px;
    font-weight:1000;
    cursor:pointer;
    border:1px solid rgba(2,6,23,.12);
    background:#fff;
  }
  .btn-primary{
    border-color: rgba(14,116,144,.22);
    background: rgba(14,116,144,.92);
    color:#eaf3ff;
  }
  .btn-primary:hover{background: rgba(11,95,118,.98);}

  /* ===== Footer ===== */
  .footer{
    border-top:1px solid #e5e7eb;
    background:#fff;
  }
  .footer-inner{
    max-width:var(--container);
    margin:0 auto;
    padding:16px 18px;
    color:var(--muted);
    font-size:13px;
    display:flex;
    justify-content:flex-end;
    flex-wrap:wrap;
    gap:10px;
  }
  .footer a{color:var(--muted);text-decoration:none;}
  .footer a:hover{text-decoration:underline;}

  /* ===== Responsive ===== */
  @media(max-width:980px){
    .fleet-head{flex-direction:column;align-items:flex-start}
    .pills{justify-content:flex-start}
    .fleet-grid{grid-template-columns:1fr}
    .rental-cols{grid-template-columns:1fr}
  }
  @media (max-width: 830px){
    .header-cta{ display:none; }
    .header-right{ margin-left:auto; }
  }
  @media(max-width:560px){
    .fleet-title{font-size:32px}
    .specs{grid-template-columns:1fr}
    .rent-grid{grid-template-columns:1fr}
    .form-grid{grid-template-columns:1fr}
  }
  @media (max-width: 360px){
    .brand-name{ font-size:16px; }
    .brand-logo{ width:40px; height:40px; }
    .container{ padding:0 14px; }
  }

  @media(prefers-reduced-motion:reduce){
    .drone-card,.toggle-btn,.rent-cta,.drone-visual img,.drone-visual:after{transition:none; scroll-behavior:auto !important;}
  }
</style>
<script defer src="https://cloud.umami.is/script.js"
        data-website-id="64263d84-d116-4204-a2bf-46499c6fb636"></script>

</head>

<body>

<!-- HEADER -->
<header class="site-header" id="top">
  <div class="container">
    <div class="header-inner">
      <a class="brand" href="index.html#home" aria-label="Vai a Home">
        <img class="brand-logo" src="images/logo/logo_droni_trasparente_sx.png" alt="STRATIA">
        <span class="brand-name">STRATIA</span>
      </a>
      <div class="header-right">
        <a class="header-cta" href="#contatti" data-umami-event="cta_contatti">Contatti</a>
        <a class="header-cta" href="index.html#home">Indietro</a>
      </div>
    </div>
  </div>
</header>

<section id="flotta" class="fleet section">
  <div class="container">

    <header class="fleet-head">
      <div>
        <p class="kicker">Operatività & Asset</p>
        <h2 class="fleet-title">La Flotta</h2>
        <p class="fleet-sub">
          Droni operativi STRATIA per ispezioni, rilievi e riprese tecniche.
          Il noleggio è <strong>sempre operativo</strong>: pilotaggio, pianificazione e sicurezza inclusi.
        </p>
      </div>

      <div class="pills">
        <span class="pill">Pilota certificato</span>
        <span class="pill">Assicurazione RC</span>
        <span class="pill">Consegna dati & report</span>
      </div>
    </header>

    <div class="fleet-grid">

      <!-- 1) DJI Mini 3 -->
      <article class="drone-card" data-drone="DJI Mini 3">
        <div class="drone-top">
          <div class="drone-badges">
            <span class="badge">Lightweight</span>
            <span class="badge badge--soft">Quick Survey</span>
          </div>

          <span class="wire-hint" title="Doppio click sull’immagine per Wireframe">
            <span class="wire-dot" aria-hidden="true"></span> Wireframe
          </span>

          <div class="drone-visual" aria-label="DJI Mini 3">
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/f/fe/Drone_dji_mini_3_pro.jpg"
              alt="DJI Mini 3"
              loading="lazy" decoding="async">
          </div>

          <h3 class="drone-name">DJI Mini 3</h3>
          <p class="drone-role">Sopralluoghi rapidi & contesti leggeri</p>
        </div>

        <div class="specs">
          <div class="spec"><small>Peso</small><strong>248 g</strong></div>
          <div class="spec"><small>Autonomia</small><strong>38 min (51 min Plus)</strong></div>
          <div class="spec"><small>Camera</small><strong>1/1.3&quot; • 48 MP</strong></div>
          <div class="spec"><small>Ideale per</small><strong>Tetti • facciate • social</strong></div>
        </div>

        <div class="card-actions">
          <button class="toggle-btn" type="button" aria-expanded="false">Vedi noleggio</button>
        </div>

        <div class="drawer" aria-hidden="true">
          <div class="drawer-head">
            <h4>Noleggio operativo</h4>
            <p>Sempre con pilota certificato</p>
          </div>

          <div class="rent-grid">
            <div class="rent-card">
              <div class="rent-top">
                <div class="rent-title">1 ora</div>
                <div class="rent-price">€ 70</div>
              </div>
              <ul class="rent-list">
                <li>Briefing + pianificazione</li>
                <li>Volo operativo</li>
                <li>File grezzi</li>
              </ul>
              <button class="rent-cta" type="button" data-duration="1 ora">Richiedi disponibilità</button>
            </div>

            <div class="rent-card">
              <div class="rent-top">
                <div class="rent-title">2 ore</div>
                <div class="rent-price">€ 120</div>
              </div>
              <ul class="rent-list">
                <li>Piano esteso</li>
                <li>Più acquisizioni</li>
                <li>Consegna ordinata</li>
              </ul>
              <button class="rent-cta" type="button" data-duration="2 ore">Richiedi disponibilità</button>
            </div>
          </div>

          <div class="drawer-note">
            ✔ Operato da pilota STRATIA • RC inclusa • briefing sicurezza • gestione missione
          </div>
        </div>
      </article>

      <!-- 2) DJI Avata 2 -->
      <article class="drone-card" data-drone="DJI Avata 2">
        <div class="drone-top">
          <div class="drone-badges">
            <span class="badge">FPV</span>
            <span class="badge badge--soft">Indoor / Action</span>
          </div>

          <span class="wire-hint" title="Doppio click sull’immagine per Wireframe">
            <span class="wire-dot" aria-hidden="true"></span> Wireframe
          </span>

          <div class="drone-visual" aria-label="DJI Avata 2">
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/4/46/DJI_AVATA_2.jpg"
              alt="DJI Avata 2"
              loading="lazy" decoding="async">
          </div>

          <h3 class="drone-name">DJI Avata 2</h3>
          <p class="drone-role">Riprese dinamiche & passaggi stretti</p>
        </div>

        <div class="specs">
          <div class="spec"><small>Sensore</small><strong>1/1.3&quot; • 12 MP</strong></div>
          <div class="spec"><small>FOV</small><strong>155°</strong></div>
          <div class="spec"><small>Video</small><strong>fino a 4K</strong></div>
          <div class="spec"><small>Ideale per</small><strong>Interni • storytelling • action</strong></div>
        </div>

        <div class="card-actions">
          <button class="toggle-btn" type="button" aria-expanded="false">Vedi noleggio</button>
        </div>

        <div class="drawer" aria-hidden="true">
          <div class="drawer-head">
            <h4>Noleggio operativo</h4>
            <p>Sempre con pilota certificato</p>
          </div>

          <div class="rent-grid">
            <div class="rent-card">
              <div class="rent-top">
                <div class="rent-title">1 ora</div>
                <div class="rent-price">€ 150</div>
              </div>
              <ul class="rent-list">
                <li>Briefing safety FPV</li>
                <li>Volo + riprese</li>
                <li>File grezzi</li>
              </ul>
              <button class="rent-cta" type="button" data-duration="1 ora">Richiedi disponibilità</button>
            </div>

            <div class="rent-card">
              <div class="rent-top">
                <div class="rent-title">2 ore</div>
                <div class="rent-price">€ 230</div>
              </div>
              <ul class="rent-list">
                <li>Tracciato ottimizzato</li>
                <li>Più take</li>
                <li>Consegna ordinata</li>
              </ul>
              <button class="rent-cta" type="button" data-duration="2 ore">Richiedi disponibilità</button>
            </div>
          </div>

          <div class="drawer-note">
            ✔ Operato da pilota STRATIA • RC inclusa • briefing sicurezza • gestione missione
          </div>
        </div>
      </article>

      <!-- 3) DJI Air 2S -->
      <article class="drone-card" data-drone="DJI Air 2S">
        <div class="drone-top">
          <div class="drone-badges">
            <span class="badge">1-inch</span>
            <span class="badge badge--soft">Photo Pro</span>
          </div>

          <span class="wire-hint" title="Doppio click sull’immagine per Wireframe">
            <span class="wire-dot" aria-hidden="true"></span> Wireframe
          </span>

          <div class="drone-visual" aria-label="DJI Air 2S">
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/7/77/DJI_Air_2S_%281%29.jpg"
              alt="DJI Air 2S"
              loading="lazy" decoding="async">
          </div>

          <h3 class="drone-name">DJI Air 2S</h3>
          <p class="drone-role">Qualità pro, setup agile</p>
        </div>

        <div class="specs">
          <div class="spec"><small>Peso</small><strong>595 g</strong></div>
          <div class="spec"><small>Autonomia</small><strong>31 min</strong></div>
          <div class="spec"><small>Camera</small><strong>1&quot; • 20 MP</strong></div>
          <div class="spec"><small>Ideale per</small><strong>Foto • video • sopralluoghi premium</strong></div>
        </div>

        <div class="card-actions">
          <button class="toggle-btn" type="button" aria-expanded="false">Vedi noleggio</button>
        </div>

        <div class="drawer" aria-hidden="true">
          <div class="drawer-head">
            <h4>Noleggio operativo</h4>
            <p>Sempre con pilota certificato</p>
          </div>

          <div class="rent-grid">
            <div class="rent-card">
              <div class="rent-top">
                <div class="rent-title">1 ora</div>
                <div class="rent-price">€ 100</div>
              </div>
              <ul class="rent-list">
                <li>Briefing + pianificazione</li>
                <li>Volo + acquisizione</li>
                <li>File grezzi</li>
              </ul>
              <button class="rent-cta" type="button" data-duration="1 ora">Richiedi disponibilità</button>
            </div>

            <div class="rent-card">
              <div class="rent-top">
                <div class="rent-title">2 ore</div>
                <div class="rent-price">€ 150</div>
              </div>
              <ul class="rent-list">
                <li>Piano completo</li>
                <li>Più angoli/target</li>
                <li>Consegna ordinata</li>
              </ul>
              <button class="rent-cta" type="button" data-duration="2 ore">Richiedi disponibilità</button>
            </div>
          </div>

          <div class="drawer-note">
            ✔ Operato da pilota STRATIA • RC inclusa • briefing sicurezza • gestione missione
          </div>
        </div>
      </article>

      <!-- 4) DJI Mavic  -->
      <article class="drone-card" data-drone="DJI Mavic 4 Pro">
        <div class="drone-top">
          <div class="drone-badges">
            <span class="badge">Flagship</span>
            <span class="badge badge--soft">Triple Camera</span>
          </div>

          <span class="wire-hint" title="Doppio click sull’immagine per Wireframe">
            <span class="wire-dot" aria-hidden="true"></span> Wireframe
          </span>

          <div class="drone-visual" aria-label="DJI Mavic 3 Pro (placeholder)">
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/9/94/2024-10-_DJI_Mavic_3_Pro_-_09.jpg"
              alt="DJI Mavic 3 Pro (placeholder per Mavic 4 Pro)"
              loading="lazy" decoding="async">
          </div>

          <h3 class="drone-name">DJI Mavic 4 Pro</h3>
          <p class="drone-role">Massima qualità & sicurezza operativa</p>
        </div>

        <div class="specs">
          <div class="spec"><small>Autonomia</small><strong>51 min</strong></div>
          <div class="spec"><small>Main</small><strong>4/3 • 100 MP</strong></div>
          <div class="spec"><small>Tele</small><strong>48 MP + 50 MP</strong></div>
          <div class="spec"><small>Ideale per</small><strong>Missioni premium • complessità</strong></div>
        </div>

        <div class="card-actions">
          <button class="toggle-btn" type="button" aria-expanded="false">Vedi noleggio</button>
        </div>

        <div class="drawer" aria-hidden="true">
          <div class="drawer-head">
            <h4>Noleggio operativo</h4>
            <p>Sempre con pilota certificato</p>
          </div>

          <div class="rent-grid">
            <div class="rent-card">
              <div class="rent-top">
                <div class="rent-title">1 ora</div>
                <div class="rent-price">€ 230</div>
              </div>
              <ul class="rent-list">
                <li>Pianificazione missione</li>
                <li>Volo operativo</li>
                <li>File grezzi</li>
              </ul>
              <button class="rent-cta" type="button" data-duration="1 ora">Richiedi disponibilità</button>
            </div>

            <div class="rent-card">
              <div class="rent-top">
                <div class="rent-title">2 ore</div>
                <div class="rent-price">€ 350</div>
              </div>
              <ul class="rent-list">
                <li>Workflow esteso</li>
                <li>Più acquisizioni</li>
                <li>Consegna ordinata</li>
              </ul>
              <button class="rent-cta" type="button" data-duration="2 ore">Richiedi disponibilità</button>
            </div>
          </div>

          <div class="drawer-note">
            ✔ Operato da pilota STRATIA • RC inclusa • briefing sicurezza • gestione missione
          </div>
        </div>
      </article>

    </div>

    <!-- NOLEGGIO (copy) -->
    <section class="rental section" aria-label="Noleggio operativo">
      <div class="rental-wrap">
        <div class="rental-head">
          <h3>Noleggio operativo</h3>
          <p>
            STRATIA non “affitta” il drone: esegue una <strong>missione operativa</strong>. Questo significa che il servizio include
            pilotaggio certificato, pianificazione, sicurezza e gestione dell’acquisizione dati.
          </p>
        </div>

        <div class="rental-cols">
          <div class="rental-card">
            <h4>Cosa include</h4>
            <ul class="rental-list">
              <li>Pianificazione missione e briefing sicurezza</li>
              <li>Operazione svolta da <strong>pilota certificato STRATIA</strong></li>
              <li>Assicurazione RC e gestione operativa</li>
              <li>Acquisizione dati (foto/video) in base al drone scelto</li>
              <li>Consegna file grezzi e organizzazione materiale</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTATTI -->
    <section id="contatti" class="section" aria-label="Contatti">
      <div class="form-wrap">
        <div class="form-head">
          <h3>Richiedi disponibilità</h3>
          <p>Compila i dettagli: il messaggio verrà precompilato con drone e durata selezionati.</p>
        </div>

        <form class="contact-form" id="contactForm"
              action="https://formspree.io/f/xqeaqbwy"
              method="POST"
              novalidate>

          <!-- META -->
          <input type="hidden" name="pagina" value="flotta.html">
          <input type="hidden" name="_subject" value="[STRATIA] Richiesta flotta / noleggio operativo">
          <input type="hidden" name="drone" id="droneHidden" value="">
          <input type="hidden" name="durata" id="durataHidden" value="">

          <div class="form-grid">
            <div>
              <label for="name">Nome e cognome</label>
              <input id="name" name="name" type="text" autocomplete="name" placeholder="Es. Mario Rossi" required>
            </div>
            <div>
              <label for="email">Email</label>
              <input id="email" name="email" type="email" autocomplete="email" placeholder="Es. nome@email.com" required>
            </div>

            <div style="grid-column:1 / -1">
              <label for="phone">Telefono (opzionale)</label>
              <input id="phone" name="phone" type="tel" autocomplete="tel" placeholder="Es. +39 ...">
            </div>

            <div style="grid-column:1 / -1">
              <label for="message">Messaggio</label>
              <textarea id="message" name="message" placeholder="Scrivi qui i dettagli (luogo, data, obiettivo)..." required></textarea>
            </div>
          </div>

          <div class="form-actions">
            <button class="btn" type="reset">Reset</button>
            <button class="btn btn-primary" type="submit">Invia richiesta</button>
          </div>

          <div id="formStatus" style="margin-top:12px; display:none;"></div>
        </form>
      </div>
    </section>

  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-inner">
    <div> © <span id="y"></span> STRATIA - Aerial & Territorial Intelligence</div>
  </div>
</footer>

<script>

document.getElementById("y").textContent = new Date().getFullYear();

(function(){
  // ===== 1) Drawer: apri/chiudi (mutualmente esclusivo) =====
  const cards = Array.from(document.querySelectorAll('.drone-card'));

  function closeAllExcept(exceptCard){
    cards.forEach(card=>{
      if(card === exceptCard) return;
      const btn = card.querySelector('.toggle-btn');
      const drawer = card.querySelector('.drawer');
      if(drawer && drawer.classList.contains('open')){
        drawer.classList.remove('open');
        drawer.setAttribute('aria-hidden','true');
      }
      if(btn){
        btn.textContent = 'Vedi noleggio';
        btn.setAttribute('aria-expanded','false');
      }
    });
  }

  cards.forEach(card=>{
    const btn = card.querySelector('.toggle-btn');
    const drawer = card.querySelector('.drawer');
    if(!btn || !drawer) return;

    btn.addEventListener('click', ()=>{
      const willOpen = !drawer.classList.contains('open');
      closeAllExcept(card);

      drawer.classList.toggle('open', willOpen);
      drawer.setAttribute('aria-hidden', willOpen ? 'false' : 'true');
      btn.setAttribute('aria-expanded', willOpen ? 'true' : 'false');
      btn.textContent = willOpen ? 'Chiudi noleggio' : 'Vedi noleggio';
    });
  });

  // ===== 2) CTA -> scroll al form + precompila message con drone + durata =====
  const contactSection = document.getElementById('contatti');
  const messageEl = document.getElementById('message');

  const droneHidden = document.getElementById('droneHidden');
  const durataHidden = document.getElementById('durataHidden');

  function scrollToContacts(){
    if(!contactSection) return;
    contactSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }

  function setMessage(drone, duration){
    if(!messageEl) return;

    const header = `Richiesta noleggio operativo STRATIA\n• Drone: ${drone}\n• Durata: ${duration}\n\n`;
    const hint = `Dettagli utili:\n- Luogo (città/indirizzo)\n- Data e fascia oraria\n- Obiettivo (ispezione / riprese / rilievo)\n- Vincoli o richieste specifiche\n\n`;
    const existing = (messageEl.value || '').trim();

    if(existing.length > 0){
      if(!existing.includes('Richiesta noleggio operativo STRATIA')){
        messageEl.value = header + hint + existing;
      }
      return;
    }
    messageEl.value = header + hint;
  }

  document.querySelectorAll('.rent-cta').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const card = btn.closest('.drone-card');
      const drone = card?.getAttribute('data-drone') || 'Drone STRATIA';
      const duration = btn.getAttribute('data-duration') || 'Durata';

      // hidden per Formspree
      if(droneHidden) droneHidden.value = drone;
      if(durataHidden) durataHidden.value = duration;

      setMessage(drone, duration);
      scrollToContacts();
      setTimeout(()=>{ messageEl?.focus(); }, 450);
    });
  });

  // ===== 3) Micro parallax sulle immagini  =====
  const hasFinePointer = window.matchMedia && window.matchMedia('(pointer:fine)').matches;
  if(hasFinePointer){
    document.querySelectorAll('.drone-visual').forEach(vis=>{
      let raf = null;

      function setVars(x, y){
        const px = (x - 0.5) * 10; // -5..+5 px
        const py = (y - 0.5) * 10; // -5..+5 px
        vis.style.setProperty('--px', px.toFixed(2) + 'px');
        vis.style.setProperty('--py', py.toFixed(2) + 'px');
      }

      vis.addEventListener('mousemove', (e)=>{
        const r = vis.getBoundingClientRect();
        const x = (e.clientX - r.left) / r.width;
        const y = (e.clientY - r.top) / r.height;

        if(raf) cancelAnimationFrame(raf);
        raf = requestAnimationFrame(()=>setVars(x, y));
      });

      vis.addEventListener('mouseleave', ()=>{
        if(raf) cancelAnimationFrame(raf);
        vis.style.setProperty('--px','0px');
        vis.style.setProperty('--py','0px');
      });
    });
  }

  // ===== 4) Switch foto <-> "wireframe" (double click sull’immagine) =====
  document.querySelectorAll('.drone-visual').forEach(vis=>{
    vis.addEventListener('dblclick', ()=>{
      const card = vis.closest('.drone-card');
      if(!card) return;
      card.classList.toggle('wire');
    });
  });

  // ===== 5) Formspree: validazione + invio AJAX =====
  const form = document.getElementById('contactForm');
  const nameEl = document.getElementById('name');
  const emailEl = document.getElementById('email');
  const statusEl = document.getElementById('formStatus');

  function isValidEmail(email){
    return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(email);
  }

  function setFieldError(el){
    if(!el) return;
    el.setAttribute('aria-invalid','true');
    el.style.borderColor = 'rgba(239,68,68,.55)';
    el.style.boxShadow = '0 0 0 4px rgba(239,68,68,.10)';
  }
  function clearFieldError(el){
    if(!el) return;
    el.removeAttribute('aria-invalid');
    el.style.borderColor = '';
    el.style.boxShadow = '';
  }

  function showStatus(type, text){
    if(!statusEl) return;
    statusEl.style.display = 'block';
    statusEl.style.padding = '10px 12px';
    statusEl.style.borderRadius = '14px';
    statusEl.style.border = type === 'ok'
      ? '1px solid rgba(34,197,94,.25)'
      : '1px solid rgba(239,68,68,.25)';
    statusEl.style.background = type === 'ok'
      ? 'rgba(34,197,94,.06)'
      : 'rgba(239,68,68,.06)';
    statusEl.style.color = 'rgba(11,35,48,.92)';
    statusEl.textContent = text;
  }

  function validate(){
    let ok = true;
    [nameEl, emailEl, messageEl].forEach(clearFieldError);

    const name = (nameEl?.value || '').trim();
    const email = (emailEl?.value || '').trim();
    const msg = (messageEl?.value || '').trim();

    if(name.length < 2){ setFieldError(nameEl); ok = false; }
    if(!isValidEmail(email)){ setFieldError(emailEl); ok = false; }
    if(msg.length < 10){ setFieldError(messageEl); ok = false; }

    if(!ok){
      showStatus('err', 'Controlla i campi: Nome, Email valida e un messaggio completo (min 10 caratteri).');
      (name.length < 2 ? nameEl : (!isValidEmail(email) ? emailEl : messageEl))?.focus();
    } else {
      if(statusEl) statusEl.style.display = 'none';
    }
    return ok;
  }

  [nameEl, emailEl, messageEl].forEach(el=>{
    el?.addEventListener('input', ()=> clearFieldError(el));
  });

  if(form){
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      if(!validate()) return;

      const submitBtn = form.querySelector('button[type="submit"]');
      const oldText = submitBtn ? submitBtn.textContent : 'Invia richiesta';

      try{
        if(submitBtn){
          submitBtn.disabled = true;
          submitBtn.textContent = 'Invio...';
        }

        const res = await fetch(form.action, {
          method: 'POST',
          headers: { 'Accept': 'application/json' },
          body: new FormData(form)
        });

        const data = await res.json().catch(()=>null);

        if(res.ok){
          showStatus('ok', 'Perfetto! Richiesta inviata. Ti risponderemo al più presto.');
          form.reset();
          if(droneHidden) droneHidden.value = '';
          if(durataHidden) durataHidden.value = '';
        } else {
          const msg = (data && data.error) ? data.error : 'Errore durante l’invio. Riprova.';
          showStatus('err', msg);
        }
      } catch(err){
        showStatus('err', 'Connessione non disponibile. Riprova tra poco.');
      } finally{
        if(submitBtn){
          submitBtn.disabled = false;
          submitBtn.textContent = oldText;
        }
      }
    });
  }
})();
</script>

</body>
</html>
